import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as h,o as t}from"./app-CZifbq50.js";const l={};function e(k,s){return t(),a("div",null,[...s[0]||(s[0]=[h(`<p>Если вы администратор Nextcloud, вы привыкли управлять своим сервером через веб-интерфейс. Но для мощного автоматизированного контроля, особенно на серверах без графического интерфейса, нет ничего лучше командной строки. Nextcloud предоставляет для этого универсальный инструмент — <code>occ</code>.</p><p><code>occ</code> (от <strong>O</strong>wn<strong>C</strong>loud <strong>C</strong>onsole) — это интерфейс командной строки для администрирования вашего Nextcloud. С его помощью вы можете управлять пользователями, приложениями, настройками и выполнять техническое обслуживание быстро и эффективно, часто с помощью скриптов.</p><p>Здесь я рассмотрю основные команды <code>occ</code> и покажу, как они могут упростить вашу жизнь.</p><h2 id="как-использовать-occ" tabindex="-1"><a class="header-anchor" href="#как-использовать-occ"><span>Как использовать OCC</span></a></h2><p>Поскольку <code>occ</code> — это скрипт PHP, для его запуска необходимо использовать интерпретатор PHP. Он находится в корневой директории вашего Nextcloud.</p><p><strong>Базовый синтаксис</strong>:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [команда] [аргументы] [--опции]</span></span></code></pre></div><p><strong>Важные пояснения</strong>:</p><ul><li><code>sudo -u www-data</code>: Запуск от имени пользователя веб-сервера (обычно <code>www-data</code> в Ubuntu/Debian или <code>apache</code> в CentOS/RHEL). Это <strong>критически важно</strong> для корректных прав доступа к файлам.</li><li><code>php</code>: Явный вызов интерпретатора PHP.</li><li><code>occ</code>: Сам скрипт.</li><li><code>[команда] [аргументы] [--опции]</code>: Конкретная команда и ее параметры.</li></ul><p><strong>Проверка установки</strong>:<br> Первым делом убедитесь, что <code>occ</code> доступен, и проверьте версию Nextcloud.</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span></code></pre></div><p><em>Пример вывода</em>:</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>  - installed: true</span></span>
<span class="line"><span>  - version: 31.0.10.2</span></span>
<span class="line"><span>  - versionstring: 31.0.10</span></span>
<span class="line"><span>  - edition:</span></span></code></pre></div><h2 id="категории-и-основные-команды-occ" tabindex="-1"><a class="header-anchor" href="#категории-и-основные-команды-occ"><span>Категории и основные команды OCC</span></a></h2><p>Давайте сгруппируем команды по их назначению.</p><h3 id="_1-команды-для-управления-системои-и-обслуживания" tabindex="-1"><a class="header-anchor" href="#_1-команды-для-управления-системои-и-обслуживания"><span>1. Команды для управления системой и обслуживания</span></a></h3><p>Эти команды необходимы для поддержания здоровья и производительности вашего сервера.</p><ul><li><p><strong><code>maintenance:mode</code></strong> — Включение/выключение режима обслуживания. Отключает веб-интерфейс для всех пользователей (кроме админов), что необходимо для установки приложений, обновления или резервного копирования.</p><ul><li><strong>Включить</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maintenance:mode</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --on</span></span></code></pre></div></li><li><strong>Выключить</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maintenance:mode</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --off</span></span></code></pre></div></li><li><strong>Проверить статус</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maintenance:mode</span></span></code></pre></div></li></ul></li><li><p><strong><code>maintenance:repair</code></strong> — Исправление различных проблем. Может исправить повреждения в базе данных или файловом хранилище.</p><ul><li><strong>Исправить базу данных</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maintenance:repair</span></span></code></pre></div></li><li><strong>Исправить шары (shares)</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maintenance:repair</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --include-expensive</span></span></code></pre></div></li><li><strong>Исправить все возможные проблемы</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maintenance:repair</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --include-expensive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --all-apps</span></span></code></pre></div></li></ul></li></ul><h3 id="_2-команды-для-управления-пользователями-и-группами" tabindex="-1"><a class="header-anchor" href="#_2-команды-для-управления-пользователями-и-группами"><span>2. Команды для управления пользователями и группами</span></a></h3><p>Автоматизация управления учетными записями — одна из сильнейших сторон <code>occ</code>.</p><ul><li><p><strong><code>user:add</code></strong> — Добавление нового пользователя.</p><ul><li><strong>Пример</strong>: Создать пользователя <code>ivanov</code> с отображаемым именем &quot;Иван Иванов&quot; и добавить его в группы <code>users</code> и <code>managers</code>.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ivanov</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --display-name=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Иван Иванов&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --group=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;users&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --group=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;managers&quot;</span></span></code></pre></div></li><li><strong>Пример (простой)</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> petrov</span></span></code></pre></div></li></ul></li><li><p><strong><code>user:resetpassword</code></strong> — Сброс пароля пользователя.</p><ul><li><strong>Пример</strong>: Сбросить пароль для пользователя <code>ivanov</code>.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:resetpassword</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ivanov</span></span></code></pre></div><em>После ввода команды вас попросят ввести новый пароль.</em></li></ul></li><li><p><strong><code>user:list</code></strong> — Просмотр списка пользователей.</p><ul><li><strong>Пример</strong>: Показать всех пользователей.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:list</span></span></code></pre></div></li><li><strong>Пример</strong>: Показать пользователей в группе <code>managers</code>.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:list</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --group=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;managers&quot;</span></span></code></pre></div></li><li><strong>Пример</strong>: Показать пользователей, которые не входят в группу <code>users</code>.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:list</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --groups</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --less</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;users&quot;</span></span></code></pre></div></li></ul></li><li><p><strong><code>user:info</code></strong> — Просмотр информации о пользователе.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:info</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ivanov</span></span></code></pre></div></li></ul></li><li><p><strong><code>group:add</code></strong> — Создание новой группы.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> group:add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new_interns</span></span></code></pre></div></li></ul></li><li><p><strong><code>group:list</code></strong> — Просмотр списка групп.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> group:list</span></span></code></pre></div></li></ul></li></ul><h3 id="_3-команды-для-управления-приложениями-apps" tabindex="-1"><a class="header-anchor" href="#_3-команды-для-управления-приложениями-apps"><span>3. Команды для управления приложениями (apps)</span></a></h3><p>Управление приложениями через CLI быстрее и идеально подходит для развертывания.</p><ul><li><p><strong><code>app:list</code></strong> — Просмотр списка приложений.</p><ul><li><strong>Пример</strong>: Показать все приложения.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:list</span></span></code></pre></div></li><li><strong>Пример</strong>: Показать только включенные приложения.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:list</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --enabled</span></span></code></pre></div></li><li><strong>Пример</strong>: Показать только отключенные приложения.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:list</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --disabled</span></span></code></pre></div></li></ul></li><li><p><strong><code>app:enable</code></strong> — Включение приложения.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contacts</span></span></code></pre></div></li></ul></li><li><p><strong><code>app:disable</code></strong> — Отключение приложения.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contacts</span></span></code></pre></div></li></ul></li><li><p><strong><code>app:install</code></strong> — Установка приложения из App Store.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> notes</span></span></code></pre></div></li></ul></li><li><p><strong><code>app:update</code></strong> — Обновить приложение или все приложения.</p><ul><li><strong>Пример</strong>: Обновить приложение.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:update</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contacts</span></span></code></pre></div></li><li><strong>Пример</strong>: Обновить все приложения.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:update</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --all</span></span></code></pre></div></li><li><strong>Пример</strong>: Показать доступные обновления, без обновления.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:update</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --showonly</span></span></code></pre></div></li></ul></li><li><p><strong><code>app:remove</code></strong> — Полное удаление приложения.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app:remove</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> notes</span></span></code></pre></div></li></ul></li></ul><h3 id="_4-другие-полезные-команды" tabindex="-1"><a class="header-anchor" href="#_4-другие-полезные-команды"><span>4. Другие полезные команды</span></a></h3><ul><li><p><strong><code>config:system:set</code></strong> — Прямое изменение системных настроек в <code>config.php</code>.</p><ul><li><strong>Пример</strong>: Включить отладочный режим.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config:system:set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> debug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --value=true</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --type=boolean</span></span></code></pre></div></li><li><strong>Пример</strong>: Изменить доверенный домен.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config:system:set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trusted_domains</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --value=cloud.mydomain.com</span></span></code></pre></div></li><li><strong>Пример</strong>: Установить регион по умолчанию для номеров телефонов.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config:system:set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default_phone_region</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --value=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;RU&quot;</span></span></code></pre></div></li></ul></li><li><p><strong><code>security:bruteforce:reset</code></strong> — Сброс записей о попытках брутфорса для определённого IP-адреса.</p><ul><li><strong>Пример</strong>:<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> security:bruteforce:reset</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.1.1</span></span></code></pre></div></li></ul></li><li><p><strong><code>files:scan</code></strong> — Пересканирование файлового хранилища. Принудительно обновляет индекс базы данных, если файлы были добавлены или изменены в обход Nextcloud (например, через SSH).</p><ul><li><strong>Пример</strong>: Просканировать все файлы всех пользователей.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> files:scan</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --all</span></span></code></pre></div></li><li><strong>Пример</strong>: Просканировать файлы конкретного пользователя.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> files:scan</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ivanov</span></span></code></pre></div></li></ul></li></ul><h2 id="советы-и-лучшие-практики" tabindex="-1"><a class="header-anchor" href="#советы-и-лучшие-практики"><span>Советы и лучшие практики</span></a></h2><ol><li><strong>Всегда используйте <code>sudo -u www-data</code></strong>. Это предотвращает проблемы с правами доступа к файлам и базе данных.</li><li><strong>Резервное копирование</strong>. Перед выполнением потенциально опасных операций (особенно <code>maintenance:repair</code> или удаление пользователей) всегда делайте резервную копию базы данных и директории <code>data</code>.</li><li><strong>Справка</strong>. Чтобы получить справку по любой команде, используйте флаг <code>--help</code>.<div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www-data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> php</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> occ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:add</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --help</span></span></code></pre></div></li></ol><h2 id="заключение" tabindex="-1"><a class="header-anchor" href="#заключение"><span>Заключение</span></a></h2><p>Интерфейс командной строки <code>occ</code> — это не просто альтернатива веб-интерфейсу, а мощный инструмент, который открывает путь к профессиональному администрированию Nextcloud. Он позволяет автоматизировать рутинные задачи, интегрировать управление Nextcloud в ваши скрипты развертывания и эффективно решать проблемы.</p><p>Освоив эти команды, вы сможете управлять своим Nextcloud-сервером с непревзойденной скоростью и точностью.</p><hr><p><em>Источники:</em><br><a href="https://docs.nextcloud.com/server/latest/admin_manual/occ_command.html" target="_blank" rel="noopener noreferrer">Документация Nextcloud</a></p>`,33)])])}const d=i(l,[["render",e]]),g=JSON.parse('{"path":"/homelab/nextcloud/occ-command.html","title":"Руководство по OCC - управление Nextcloud из командной строки","lang":"ru-RU","frontmatter":{"title":"Руководство по OCC - управление Nextcloud из командной строки","shortTitle":"OCC команды","icon":"terminal","date":"2025-10-02T00:00:00.000Z","category":["Nextcloud"],"tag":["OCC"],"order":100,"description":"Если вы администратор Nextcloud, вы привыкли управлять своим сервером через веб-интерфейс. Но для мощного автоматизированного контроля, особенно на серверах без графического инт...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Руководство по OCC - управление Nextcloud из командной строки\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-10-02T00:00:00.000Z\\",\\"dateModified\\":\\"2025-11-01T23:58:26.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://klimov.su/homelab/nextcloud/occ-command.html"}],["meta",{"property":"og:site_name","content":"Дмитрий Климов"}],["meta",{"property":"og:title","content":"Руководство по OCC - управление Nextcloud из командной строки"}],["meta",{"property":"og:description","content":"Если вы администратор Nextcloud, вы привыкли управлять своим сервером через веб-интерфейс. Но для мощного автоматизированного контроля, особенно на серверах без графического инт..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ru-RU"}],["meta",{"property":"og:updated_time","content":"2025-11-01T23:58:26.000Z"}],["meta",{"property":"article:tag","content":"OCC"}],["meta",{"property":"article:published_time","content":"2025-10-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-01T23:58:26.000Z"}]]},"git":{"createdTime":1762041506000,"updatedTime":1762041506000,"contributors":[{"name":"Godparent","username":"Godparent","email":"dmitriy@klimov.su","commits":1,"url":"https://github.com/Godparent"}]},"readingTime":{"minutes":3.4,"words":1021},"filePathRelative":"homelab/nextcloud/occ-command.md","excerpt":"<p>Если вы администратор Nextcloud, вы привыкли управлять своим сервером через веб-интерфейс. Но для мощного автоматизированного контроля, особенно на серверах без графического интерфейса, нет ничего лучше командной строки. Nextcloud предоставляет для этого универсальный инструмент — <code>occ</code>.</p>","autoDesc":true}');export{d as comp,g as data};
