import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,b as i,o as t}from"./app-CZifbq50.js";const r={};function o(n,a){return t(),s("div",null,[...a[0]||(a[0]=[i(`<h3 id="proxmox-ve-helper-scripts" tabindex="-1"><a class="header-anchor" href="#proxmox-ve-helper-scripts"><span>Proxmox VE Helper-Scripts</span></a></h3><div class="hint-container tip"><p class="hint-container-title"><a href="https://community-scripts.github.io/ProxmoxVE/scripts" target="_blank" rel="noopener noreferrer">Proxmox VE Helper-Scripts</a></p></div><h3 id="остановка-и-запуск-контеинеров-через-терминал" tabindex="-1"><a class="header-anchor" href="#остановка-и-запуск-контеинеров-через-терминал"><span>Остановка и запуск контейнеров через терминал</span></a></h3><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>pct start 100</span></span>
<span class="line"><span>pct stop 100</span></span></code></pre></div><p>где 100 ID контейнера</p><h2 id="каталоги" tabindex="-1"><a class="header-anchor" href="#каталоги"><span>Каталоги</span></a></h2><h3 id="конфиги-lxc" tabindex="-1"><a class="header-anchor" href="#конфиги-lxc"><span>Конфиги LXC</span></a></h3><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /etc/pve/lxc/</span></span></code></pre></div><h3 id="конфиги-vm" tabindex="-1"><a class="header-anchor" href="#конфиги-vm"><span>Конфиги VM</span></a></h3><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /etc/pve/qemu-server/</span></span></code></pre></div><h3 id="бэкапы-в-local" tabindex="-1"><a class="header-anchor" href="#бэкапы-в-local"><span>Бэкапы в local</span></a></h3><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cd /var/lib/vz/dump/</span></span></code></pre></div><h2 id="proxmox-ve-backup" tabindex="-1"><a class="header-anchor" href="#proxmox-ve-backup"><span>Proxmox VE Backup</span></a></h2><h3 id="делаем-резервную-копию" tabindex="-1"><a class="header-anchor" href="#делаем-резервную-копию"><span>Делаем резервную копию</span></a></h3><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>vzdump 105 --dumpdir /root --mode stop --compress zstd</span></span></code></pre></div><p>В нашем случае <strong>ID - 105</strong>, директория назначения <strong>/root</strong> и режим копирования с остановкой виртуальной машины - <strong>stop</strong>, последнее - важно, данный режим обеспечивает максимальную согласованность резервной копии и при переносе между серверами следует использовать именно его, и сжатие.</p><h3 id="восстанавливаем-из-резервнои-копии" tabindex="-1"><a class="header-anchor" href="#восстанавливаем-из-резервнои-копии"><span>Восстанавливаем из резервной копии</span></a></h3><h4 id="виртуальная-машина" tabindex="-1"><a class="header-anchor" href="#виртуальная-машина"><span>Виртуальная машина:</span></a></h4><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>qmrestore /root/vzdump-qemu-105-2025_12_10-16_47_51.vma 105 -storage local-lvm</span></span></code></pre></div><p>Где мы сначала указываем путь к резервной копии, затем любой свободный <strong>ID</strong> (он может отличаться от старого ID, в нашем случае просто совпало) и хранилище <strong>local-lvm</strong> при помощи ключа <strong>-storage</strong>, если этого не сделать, то виртуальная машина будет восстановлена в хранилище <strong>local</strong>.</p><h4 id="для-контеинеров-команда-будет-немного-инои" tabindex="-1"><a class="header-anchor" href="#для-контеинеров-команда-будет-немного-инои"><span>Для контейнеров команда будет немного иной:</span></a></h4><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>pct restore 107 /root/vzdump-lxc-103-2025_12_10-16_49_32.vma -storage local-lvm</span></span></code></pre></div><p>В ней мы сначала указываем желаемый свободный <strong>ID</strong>, а затем путь к архиву.</p><h2 id="удаляем-local-lvm-в-proxmox" tabindex="-1"><a class="header-anchor" href="#удаляем-local-lvm-в-proxmox"><span>Удаляем local-lvm в Proxmox</span></a></h2><p>Открываем датацентр вкладку Хранилище и удаляем local-lvm, далее открываем терминал и выполняем команды:</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>lvremove /dev/pve/data</span></span></code></pre></div><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>lvresize -l +100%FREE /dev/pve/root</span></span></code></pre></div><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>resize2fs /dev/mapper/pve-root</span></span></code></pre></div><h2 id="гостевои-агент" tabindex="-1"><a class="header-anchor" href="#гостевои-агент"><span>Гостевой агент</span></a></h2><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>apt install qemu-guest-agent</span></span></code></pre></div>`,30)])])}const p=e(r,[["render",o]]),c=JSON.parse('{"path":"/docs/proxmox/commands.html","title":"Команды Proxmox VE","lang":"ru-RU","frontmatter":{"title":"Команды Proxmox VE","shortTitle":"Команды","icon":"terminal","date":"2025-01-20T00:00:00.000Z","order":100,"category":["Proxmox"],"description":"Proxmox VE Helper-Scripts Proxmox VE Helper-Scripts Остановка и запуск контейнеров через терминал где 100 ID контейнера Каталоги Конфиги LXC Конфиги VM Бэкапы в local Proxmox VE...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Команды Proxmox VE\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-20T00:00:00.000Z\\",\\"dateModified\\":\\"2025-06-08T14:05:06.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://klimov.su/docs/proxmox/commands.html"}],["meta",{"property":"og:site_name","content":"Дмитрий Климов"}],["meta",{"property":"og:title","content":"Команды Proxmox VE"}],["meta",{"property":"og:description","content":"Proxmox VE Helper-Scripts Proxmox VE Helper-Scripts Остановка и запуск контейнеров через терминал где 100 ID контейнера Каталоги Конфиги LXC Конфиги VM Бэкапы в local Proxmox VE..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ru-RU"}],["meta",{"property":"og:updated_time","content":"2025-06-08T14:05:06.000Z"}],["meta",{"property":"article:published_time","content":"2025-01-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-08T14:05:06.000Z"}]]},"git":{"createdTime":1749153148000,"updatedTime":1749391506000,"contributors":[{"name":"Godparent","username":"Godparent","email":"dmitriy@klimov.su","commits":2,"url":"https://github.com/Godparent"}]},"readingTime":{"minutes":0.78,"words":235},"filePathRelative":"docs/proxmox/commands.md","excerpt":"<h3>Proxmox VE Helper-Scripts</h3>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\"><a href=\\"https://community-scripts.github.io/ProxmoxVE/scripts\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Proxmox VE Helper-Scripts</a></p>\\n</div>\\n<h3>Остановка и запуск контейнеров через терминал</h3>","autoDesc":true}');export{p as comp,c as data};
