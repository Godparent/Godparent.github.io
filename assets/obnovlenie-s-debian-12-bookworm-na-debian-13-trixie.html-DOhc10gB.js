import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as e,o as t}from"./app-CZifbq50.js";const n={};function p(h,i){return t(),a("div",null,[...i[0]||(i[0]=[e(`<p>Сегодня я хочу рассказать вам о самом экстремальном виде спорта в мире Linux — обновлении дистрибутива с одного мажорного релиза на другой. Мой «спортивный инвентарь»: верный Debian 12 Bookworm, крепкие нервы и безрассудная вера в <code>apt-get</code>.</p><p>Bookworm был прекрасен. Стабильный, как швейцарские часы, предсказуемый, как восход солнца. Он не подводил меня ни в дождь, ни в зной. Но где-то на горизонте замаячил новый, юный и дерзкий Trixie. Он манил меня новыми пакетами и блестящим ядром. Я не выдержал. Решено: апгрейд!</p><h2 id="шаг-1-готовимся-морально-и-физически-споилер-это-одно-и-то-же" tabindex="-1"><a class="header-anchor" href="#шаг-1-готовимся-морально-и-физически-споилер-это-одно-и-то-же"><span>Шаг 1: Готовимся морально и физически (спойлер: это одно и то же)</span></a></h2><p>Первое правило клуба апгрейда Debian: <strong>бэкап</strong>. Нет, серьезно. Сделайте бэкап. Представьте, что вы идете по канату над пропастью. Бэкап — это ваша страховочная сетка. Без нее ваш поход может закончиться эпичным полетом в бездну с криком: «А почему <code>/home</code> был на одном разделе с <code>/</code>?!».</p><p>Заливаем кофе (или что-то покрепче), открываем терминал и произносим магическую мантру:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> upgrade</span></span></code></pre></div><p>Смотрим, как система судорожно обновляет все, что можно. Bookworm в последний раз тянется к своему стабильному прошлому.</p><h2 id="шаг-2-меняем-источники-на-смелые-и-нестабильные" tabindex="-1"><a class="header-anchor" href="#шаг-2-меняем-источники-на-смелые-и-нестабильные"><span>Шаг 2: Меняем источники на смелые и нестабильные</span></a></h2><p>Теперь нужно вежливо попросить систему забыть о старом друге и посмотреть на нового. Редактируем <code>/etc/apt/sources.list</code> с помощью любимого редактора.</p><p>Меняем все упоминания <code>bookworm</code> на <code>trixie</code>. Это момент истины. Рука дрожит, но вы помните, ради чего все это затеялось.</p><p>Команда для быстрой замены:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/bookworm/trixie/g&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/apt/sources.list</span></span></code></pre></div><p>Выглядеть это должно примерно так:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://deb.debian.org/debian</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trixie</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contrib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free-firmware</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://deb.debian.org/debian</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trixie-updates</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contrib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free-firmware</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://security.debian.org</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trixie-security</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contrib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free-firmware</span></span></code></pre></div><p>Сохраняем файл и чувствуем, как из монитора доносится легкий вздох обреченности.</p><div class="hint-container tip"><p class="hint-container-title">Совет</p><p>Убедитесь, что не осталось репозиториев, специфичных для Debian Bookworm, в противном случае вы можете поместить <code>#</code> символ в начале соответствующей строки для комментирования этих репозиториев. Проверьте все записи в файлах в папке <code>/etc/apt/sources.list.d/</code>.</p></div><h2 id="шаг-3-великии-dist-upgrade-и-интерактивныи-квест-угадаи-конфиг" tabindex="-1"><a class="header-anchor" href="#шаг-3-великии-dist-upgrade-и-интерактивныи-квест-угадаи-конфиг"><span>Шаг 3: Великий <code>dist-upgrade</code> и интерактивный квест &quot;Угадай конфиг&quot;</span></a></h2><p>Вот он, момент икс. Команда, которая отделяет мужчин от мальчиков. Делаем глубокий вдох и вводим заклинание:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dist-upgrade</span></span></code></pre></div><p>Экран начинает мигать непонятными названиями пакетов. <code>apt</code> с серьезным видом хирурга сообщает, что он собирается удалить половину системы, чтобы поставить новую, <em>еще лучшую</em> половину. Ваше сердце замирает. Вы доверяете ему? Выбора уже нет.</p><p>Процесс пополз. И вот тут <code>apt</code> внезапно превращается в вежливого, но настойчивого дворецкого и начинает засыпать вас вопросами. <strong>Начинается самый интерактивный этап нашего квеста.</strong></p><p><strong>«Хозяин, а что прикажете сделать с этим конфигом?»</strong></p><p>Система будет тыкать в вас обновленными конфигурационными файлами, как котенок — лапкой в мячик. Она вежливо поинтересуется: мол, у нас тут есть новый файл настроек от разработчиков, но и ваш, старый, тоже хорош. Что будем делать?</p><p><strong>Что делать? Не паниковать. Это нормально.</strong></p><ul><li><strong>Для большинства конфигов, которые вы не трогали,</strong> смело можно соглашаться на новую версию.</li><li><strong>Если вы там что-то правили и помните об этом</strong> — выбирайте вариант «показать разницу». Это как <code>diff</code> для чайников: вам покажут, что поменялось. Если изменения адекватные — принимайте новые. Если боитесь сломать свой идеальный настроенный файл — оставляйте старую версию. Вы всегда сможете подправить его вручную потом.</li></ul><p><strong>Параллельно с этим вас может атаковать:</strong></p><ul><li><strong><code>apt-listchanges</code></strong>: Утилита, которая гордо продемонстрирует вам длиннющую простыню текста со списком изменений в обновляемых пакетах. Читать это — все равно что читать условия пользовательского соглашения: очень важно, но никто не делает. Смело жмите <code>q</code>, чтобы выйти и продолжить.</li><li><strong>Вопросы про перезапуск служб</strong>: Система может спросить, можно ли ей перезапустить какие-нибудь демоны прямо посреди процесса. Если не уверены — просто жмите Enter, соглашаясь с вариантом по умолчанию. Не переживайте: даже если вы что-то пропустите, финальная перезагрузка после всего апдейта разом перезапустит всё, что нужно.</li></ul><p>Но вот последний пакет установлен. Самое страшное позади. Можно выдыхать.</p><h2 id="шаг-4-перезагрузка-и-встреча-с-неизвестностью" tabindex="-1"><a class="header-anchor" href="#шаг-4-перезагрузка-и-встреча-с-неизвестностью"><span>Шаг 4: Перезагрузка и встреча с неизвестностью</span></a></h2><p>Команда <code>reboot</code> звучит как приговор. Монитор гаснет. Вы смотрите на свое отражение в черном экране. Выглядите вы испуганно.</p><p>Запускается система. Долгие-долгие секунды (или минуты?) крутится инициализация. И... вот он, экран входа в систему! Логин. Пароль. Выдох. Кажется, все работает.</p><p>Но не расслабляемся. Проверяем самое важное:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/debian_version</span></span></code></pre></div><p>И видите долгожданную надпись: <code>13.1</code>.</p><p><strong>Успех!</strong> Пингвин не только выжил, но и получил новые перья.</p><h2 id="шаг-5-финальныи-штрих-—-выносим-мусор-и-наводим-марафет" tabindex="-1"><a class="header-anchor" href="#шаг-5-финальныи-штрих-—-выносим-мусор-и-наводим-марафет"><span>Шаг 5: Финальный штрих — выносим мусор и наводим марафет</span></a></h2><p>Поздравляю, система завелась! Вы великолепны. Но на этом история не заканчивается. После такого масштабного действа в вашей системе остались «строительные леса» — куча ненужных больше старых пакетов и закэшированных <code>.deb</code>-файлов, которые лишь пылятся и занимают место.</p><p>Самое время провести генеральную уборку. Открываем терминал и с чувством глубокого удовлетворения вбиваем две ритуальные команды:</p><ol><li><p><strong><code>apt --purge autoremove</code></strong> — Эта команда сканирует вашу систему на предмет пакетов, которые были установлены как зависимости для других программ, но теперь стали никому не нужны (как одиночные носки после стирки). Флаг <code>--purge</code> гарантирует, что их конфиги тоже будут безжалостно стерты с лица диска. Это освобождает гигабайты и дарит чувство невероятной лёгкости.</p></li><li><p><strong><code>apt autoclean</code></strong> — А эта команда — как уборка в гараже после ремонта. Она удаляет все скачанные архивные пакеты (<code>*.deb</code>), которые уже были установлены и теперь просто лежат мёртвым грузом в кеше. Новые версии вы в любой момент скачаете заново, а зачем хранить старый хлам?</p></li></ol><p>Теперь ваш Debian Trixie не только новенький, но и чистенький, как будто только что из салона.</p><hr><h2 id="бонус-для-перфекционистов-переезжаем-на-стильные-рельсы-deb822" tabindex="-1"><a class="header-anchor" href="#бонус-для-перфекционистов-переезжаем-на-стильные-рельсы-deb822"><span>Бонус для перфекционистов: Переезжаем на стильные рельсы deb822</span></a></h2><p>Пока вы тут с чувством выполненного долга потягиваете кофе, я расскажу вам про один элегантный апгрейд, который вы могли пропустить. Помимо пакетов, Debian незаметно улучшил и сам формат файлов репозиториев.</p><p>Ваш старый добрый <code>/etc/apt/sources.list</code> — это как записная книжка, где всё свалкой в одну строку. Новый формат <strong>deb822</strong> — это как аккуратный органайзер. Он более читаемый, структурированный и его сложнее испортить.</p><p>Если хотите идти в ногу со временем, можете перенести свои репозитории в этот новый формат. Вместо того чтобы править один файл, вы можете разложить всё по полочкам — создать отдельные файлы в папке <code>/etc/apt/sources.list.d/</code> с расширением <code>.sources</code>.</p><p>Вот как это выглядит:</p><p><strong>Старый формат (одна длинная строка):</strong><code>deb http://deb.debian.org/debian trixie main contrib non-free non-free-firmware</code></p><p><strong>Новый, стильный формат deb822 (файл <code>/etc/apt/sources.list.d/debian.sources</code>):</strong></p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Types:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> deb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">URIs:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://deb.debian.org/debian</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Suites:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trixie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Components:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> contrib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-free-firmware</span></span></code></pre></div><p>Такой формат проще читать, редактировать и добавлять новые источники. Apt понимает оба формата, так что это не обязательно, но очень круто!</p><h3 id="чтобы-перенести-все-репозитории-в-рекомендуемыи-формат-стиля-deb822-выполните" tabindex="-1"><a class="header-anchor" href="#чтобы-перенести-все-репозитории-в-рекомендуемыи-формат-стиля-deb822-выполните"><span>Чтобы перенести все репозитории в рекомендуемый формат стиля deb822, выполните:</span></a></h3><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> modernize-sources</span></span></code></pre></div><p>Ответив на следующий запрос буквой <code>n</code>, вы можете проверить изменения, которые внесет команда, прежде чем применять их. Чтобы применить их, просто запустите команду еще раз и ответьте на запрос буквой <code>Y</code>.</p><p>Команда также сохранит старые <code>.list</code> файлы рядом путем добавления <code>.bak</code> им. Вы можете удалить их, как только убедитесь, что с новым форматом все работает гладко.</p><hr><p><strong>P.S.</strong> Ваш кофе во время этого процесса остынет. Это закон. Смиритесь.</p>`,56)])])}const d=s(n,[["render",p]]),l=JSON.parse('{"path":"/blog/obnovlenie-s-debian-12-bookworm-na-debian-13-trixie.html","title":"Обновление с Debian 12 Bookworm на Debian 13 Trixie","lang":"ru-RU","frontmatter":{"title":"Обновление с Debian 12 Bookworm на Debian 13 Trixie","icon":"mdi:debian","date":"2025-09-21T00:00:00.000Z","category":["Linux"],"tag":["debian"],"sidebar":false,"description":"Сегодня я хочу рассказать вам о самом экстремальном виде спорта в мире Linux — обновлении дистрибутива с одного мажорного релиза на другой. Мой «спортивный инвентарь»: верный De...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Обновление с Debian 12 Bookworm на Debian 13 Trixie\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-09-21T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-21T18:34:54.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://klimov.su/blog/obnovlenie-s-debian-12-bookworm-na-debian-13-trixie.html"}],["meta",{"property":"og:site_name","content":"Дмитрий Климов"}],["meta",{"property":"og:title","content":"Обновление с Debian 12 Bookworm на Debian 13 Trixie"}],["meta",{"property":"og:description","content":"Сегодня я хочу рассказать вам о самом экстремальном виде спорта в мире Linux — обновлении дистрибутива с одного мажорного релиза на другой. Мой «спортивный инвентарь»: верный De..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ru-RU"}],["meta",{"property":"og:updated_time","content":"2025-09-21T18:34:54.000Z"}],["meta",{"property":"article:tag","content":"debian"}],["meta",{"property":"article:published_time","content":"2025-09-21T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-21T18:34:54.000Z"}]]},"git":{"createdTime":1758479694000,"updatedTime":1758479694000,"contributors":[{"name":"Godparent","username":"Godparent","email":"dmitriy@klimov.su","commits":1,"url":"https://github.com/Godparent"}]},"readingTime":{"minutes":3.77,"words":1131},"filePathRelative":"blog/obnovlenie-s-debian-12-bookworm-na-debian-13-trixie.md","excerpt":"<p>Сегодня я хочу рассказать вам о самом экстремальном виде спорта в мире Linux — обновлении дистрибутива с одного мажорного релиза на другой. Мой «спортивный инвентарь»: верный Debian 12 Bookworm, крепкие нервы и безрассудная вера в <code>apt-get</code>.</p>\\n<p>Bookworm был прекрасен. Стабильный, как швейцарские часы, предсказуемый, как восход солнца. Он не подводил меня ни в дождь, ни в зной. Но где-то на горизонте замаячил новый, юный и дерзкий Trixie. Он манил меня новыми пакетами и блестящим ядром. Я не выдержал. Решено: апгрейд!</p>","autoDesc":true}');export{d as comp,l as data};
